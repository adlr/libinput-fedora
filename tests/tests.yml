---
#- hosts: localhost
#  roles:
#  - role: standard-test-beakerlib
#    tags:
#      - classic
#    tests:
#      - libinput-tool-beakerlib
#
#- hosts: localhost
#  roles:
#  - role: standard-test-basic
#    tags:
#      - classic
#    tests:
#      - libinput-tool
#
#- hosts: localhost
#  roles:
#  - role: standard-test-scripts
#    tags:
#      - classic
#    tests:
#      - libinput-tool-scripttest/libinput-tool-test.sh

- hosts: localhost
  roles:
  - role: standard-test-repo
    subjects: https://copr-be.cloud.fedoraproject.org/results/whot/libinput-git/fedora-29-x86_64/
    packages: libinput
    tags:
      - classic  # running this with always doesn't do anything
  # standard-test-rpm should do this but it's currently broken. So let's add
  # a noop test that requires the package we need
  - role: standard-test-basic
    tests:
      - simple:
          dir: .
          run: "echo noop"
    tags:
      - classic  # running this with always doesn't do anythign
    required_packages:
      - python3-devel  # for pathfix during srpm prep
  - role: standard-test-source
    tags:
      - always
  - role: standard-test-basic
    tags:
      - classic
    required_packages:
      - meson
      - gcc
      - gcc-c++
      - mtdev-devel
      - libevdev-devel
      - libwacom-devel
      - check-devel
      - systemd-devel
      - valgrind
    tests:
      - libinput-test-suite
